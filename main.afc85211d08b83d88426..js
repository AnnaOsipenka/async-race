(()=>{"use strict";var e={577:(e,t,n)=>{n.r(t)},954:(e,t,n)=>{n.r(t)},923:(e,t,n)=>{n.r(t)},589:(e,t,n)=>{n.r(t)},476:(e,t,n)=>{n.r(t)},271:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(812)),r=i(n(507));t.default=class{constructor(e){this.rootElement=e,this.header=new a.default,this.main=new r.default,this.rootElement.appendChild(this.header.element),this.rootElement.appendChild(this.main.element)}}},503:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e="div",t=[]){this.element=document.createElement(e),this.element.classList.add(...t)}}},527:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(503)),r=i(n(354)),s=i(n(729));class o extends a.default{constructor(e,t){super("form",e),this.nameInput=new s.default(["name-input"],{type:"text"}),this.colorInput=new s.default(["color-input"],{type:"color"}),this.submitBtn=new r.default(["submit-btn"],t),this.element.appendChild(this.nameInput.element),this.element.appendChild(this.colorInput.element),this.element.appendChild(this.submitBtn.element),this.nameInput.onInput((e=>{const t=e.target;window.console.log(t.value)}))}onSubmit(e){this.element.addEventListener("submit",(t=>{t.preventDefault();const n=this.formCollector();e(n)}))}formCollector(){return{name:this.nameInput.getValue(),color:this.colorInput.getValue()}}setFormData(e){this.colorInput.setValue(e.color),this.nameInput.setValue(e.name)}}t.default=o},240:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(503));class r extends a.default{constructor(e,t){super("span",["carImg"]),this.element.innerHTML=`\n        <div id="car-${e}">\n        \n        <?xml version="1.0"?>\n        <svg style="fill: ${t}"  xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" width="512" height="512"><g id="_13-car" data-name="13-car"><g id="glyph"><path d="M120,236a52,52,0,1,0,52,52A52.059,52.059,0,0,0,120,236Zm0,76a24,24,0,1,1,24-24A24,24,0,0,1,120,312Z"/><path d="M408,236a52,52,0,1,0,52,52A52.059,52.059,0,0,0,408,236Zm0,76a24,24,0,1,1,24-24A24,24,0,0,1,408,312Z"/><path d="M477.4,193.04,384,176l-79.515-65.975A44.109,44.109,0,0,0,276.526,100H159.38a43.785,43.785,0,0,0-34.359,16.514L74.232,176H40A36.04,36.04,0,0,0,4,212v44a44.049,44.049,0,0,0,44,44h9.145a64,64,0,1,1,125.71,0h162.29a64,64,0,1,1,125.71,0H472a36.04,36.04,0,0,0,36-36V228.632A35.791,35.791,0,0,0,477.4,193.04ZM180,164a12,12,0,0,1-12,12H115.245a6,6,0,0,1-4.563-9.9l34.916-40.9A12,12,0,0,1,154.724,121H168a12,12,0,0,1,12,12Zm60,56H224a12,12,0,0,1,0-24h16a12,12,0,0,1,0,24Zm94.479-43.706-114.507-.266a12,12,0,0,1-11.972-12V133a12,12,0,0,1,12-12h57.548a12,12,0,0,1,7.433,2.58l53.228,42A6,6,0,0,1,334.479,176.294Z"/></g></g></svg>\n\n        `}}t.default=r},472:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(577);const r=n(470),s=a(n(687)),o=a(n(503)),l=a(n(354)),d=n(48),c=n(356),u=n(45),h=a(n(214)),f=a(n(240));class p extends o.default{constructor(e){super("div",["car"]),this.carModel=e,this.selectBtn=new l.default(["select-car-btn"],"UPDATE"),this.removeBtn=new l.default(["remove-car-btn"],"REMOVE"),this.startBtn=new l.default(["btn"],"START",{id:`start-engine-car-${this.carModel.id}`}),this.stopBtn=new l.default(["btn"],"STOP"),this.containerCarInformation=document.createElement("div"),this.carName=document.createElement("span"),this.carImg=new f.default(this.carModel.id,this.carModel.color),this.flagImg=new h.default(this.carModel.id),this.containerSvg=document.createElement("div"),this.containerBtnRuleCar=document.createElement("div"),this.carName.innerHTML=`${e.name}`,this.carName.classList.add("carName"),this.containerSvg.classList.add("containerSvg"),this.containerSvg.appendChild(this.startBtn.element),this.containerSvg.appendChild(this.stopBtn.element),this.containerSvg.appendChild(this.containerBtnRuleCar),this.containerSvg.appendChild(this.carImg.element),this.containerSvg.appendChild(this.flagImg.element),this.containerCarInformation.appendChild(this.selectBtn.element),this.containerCarInformation.appendChild(this.removeBtn.element),this.containerCarInformation.appendChild(this.carName),this.element.appendChild(this.containerCarInformation),this.element.appendChild(this.containerSvg),this.selectBtn.onClick((()=>{s.default.setSelectedCar(this.carModel)})),this.removeBtn.onClick((()=>{r.garageService.deleteCar(this.carModel.id)})),this.startBtn.onClick((()=>{this.startDriving(this.carModel.id)})),this.stopBtn.onClick((()=>{this.stopDriving(this.carModel.id),u.raceService.stopEngine(this.carModel.id)}))}startDriving(e){return i(this,void 0,void 0,(function*(){window.console.log(this);const t=document.getElementById(`start-engine-car-${e}`);t.setAttribute("disabled","disabled"),t.classList.toggle("enabling",!0);const{velocity:n,distance:i}=yield d.carService.startEngine(e),a=Math.round(i/n);t.classList.toggle("enabling",!1);const r=document.getElementById(`car-${e}`),o=document.getElementById(`flag-${e}`),l=Math.floor(c.getDistanceBetweenElements(r,o))+50;s.default.setAnimation(e,c.animation(r,l,a));const{success:u}=yield d.carService.drive(e);return u||window.cancelAnimationFrame(s.default.getAnimation(e).id),t.removeAttribute("disabled"),{success:u,id:e,time:a}}))}stopDriving(e){return i(this,void 0,void 0,(function*(){this.stopBtn.element.setAttribute("disabled","disabled"),this.stopBtn.element.classList.toggle("enabling",!0),yield d.carService.stopEngine(e),this.stopBtn.element.classList.toggle("enabling",!1),this.stopBtn.element.removeAttribute("disabled"),window.cancelAnimationFrame(s.default.getAnimation(e).id)}))}}t.default=p},354:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(503));class r extends a.default{constructor(e,t,n){super("button",e),n&&"object"==typeof n&&Object.keys(n).forEach((e=>{this.element.setAttribute(e,n[e])})),this.element.textContent=t}onClick(e){this.element.addEventListener("click",(t=>{t.preventDefault(),e()}))}}t.default=r},729:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(503));class r extends a.default{constructor(e,t){super("input",e),t&&"object"==typeof t&&Object.keys(t).forEach((e=>{this.element.setAttribute(e,t[e])}))}onInput(e){this.element.addEventListener("input",e)}getValue(){return this.element.value}setValue(e){this.element.value=e}}t.default=r},214:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(503));class r extends a.default{constructor(e){super("span",["flagImg"]),this.element.innerHTML=`\n                 <div id="flag-${e}">\n                 <?xml  version="1.0" encoding="UTF-8"?>\n                 <svg  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="512" height="512" viewBox="0 0 58 58" version="1.1">\x3c!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch --\x3e<title>014 - Finish Line</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="014---Finish-Line" transform="translate(-1.000000, 0.000000)" fill-rule="nonzero"><path d="M9,52 C8.50557404,51.999586 8.08566932,51.637907 8.012,51.149 C7.66,48.813 6.486,40.832 5.19,32.023 L3.441,20.146 C3.37446303,19.6070514 3.75020601,19.1135009 4.28742409,19.0341947 C4.82464217,18.9548885 5.32696921,19.3188149 5.419,19.854 L7.167,31.732 C8.467,40.537 9.637,48.516 9.989,50.851 C10.0285614,51.1133057 9.96227952,51.3805824 9.80474118,51.5940093 C9.64720285,51.8074362 9.41131842,51.949523 9.149,51.989 C9.0996968,51.9965521 9.04987772,52.00023 9,52 Z" id="Shape" fill="#B19046"/><path d="M51,52 C50.9494567,52.0002812 50.898969,51.9966033 50.849,51.989 C50.5866636,51.9492952 50.3508598,51.8069632 50.1935018,51.5933389 C50.0361438,51.3797146 49.9701323,51.1123117 50.01,50.85 C50.356,48.568 51.492,40.83 52.758,32.199 L54.57,19.854 C54.6620308,19.3188149 55.1643578,18.9548885 55.7015759,19.0341947 C56.238794,19.1135009 56.614537,19.6070514 56.548,20.146 L54.737,32.489 C53.471,41.125 52.337,48.867 51.989,51.15 C51.9148282,51.6388845 51.494479,52.0001553 51,52 Z" id="Shape" fill="#B19046"/><path d="M58.99,3.55 C58.92,4 58.83,4.63 58.71,5.42 C57.97,10.28 57.2333333,15.14 56.5,20 C56.3978522,20.6400855 55.8018476,21.0804172 55.16,20.99 C38.4732337,18.580006 21.5267663,18.580006 4.84,20.99 C4.19815242,21.0804172 3.60214784,20.6400855 3.5,20 C2.76,15.13 2.02,10.24 1.28,5.37 C1.26,5.26 1.25,5.14 1.23,5.03 C1.2,4.83 1.17,4.62 1.14,4.42 C1.13,4.33 1.11,4.24 1.1,4.15 L1.1,4.12 C1.07,3.9 1.04,3.71 1.01,3.55 C0.914591228,2.89585488 1.36620028,2.28774764 2.02,2.19 C20.5763519,-0.500002146 39.4236481,-0.500002146 57.98,2.19 C58.6337997,2.28774764 59.0854088,2.89585488 58.99,3.55 Z" id="Shape" fill="#CC4B4C"/><path d="M1.23,5.03 C1.2,4.82 1.17,4.61 1.14,4.42" id="Shape" fill="#CC4B4C"/><path d="M10.312,16.5 C9.80268091,16.49896 9.37551483,16.1152856 9.32,15.609 L8.413,7.345 C8.35195066,6.77914147 8.5205518,6.21245431 8.881,5.772 C9.27663033,5.29044719 9.84687971,4.98518759 10.467,4.923 C11.3336667,4.83366667 12.2003333,4.75066667 13.067,4.674 C13.4230152,4.64238199 13.7688548,4.80309757 13.9742443,5.09560674 C14.1796339,5.38811592 14.2133699,5.76797958 14.0627443,6.09210676 C13.9121187,6.41623394 13.6000152,6.635382 13.244,6.667 C12.3866667,6.743 11.5293333,6.825 10.672,6.913 C10.5816966,6.91908041 10.4975148,6.96081153 10.438,7.029 C10.4129327,7.05607042 10.3999392,7.09216349 10.402,7.129 L11.309,15.397 C11.3674012,15.9448583 10.9716574,16.4367433 10.424,16.497 C10.3867485,16.5000273 10.3493601,16.5010288 10.312,16.5 Z" id="Shape" fill="#ECF0F1"/><path d="M11.054,11.645 C10.5211258,11.6450667 10.0818058,11.2272685 10.0551288,10.6950625 C10.0284518,10.1628564 10.4237901,9.70322073 10.954,9.65 C11.798,9.564 12.6423333,9.48333333 13.487,9.408 C13.8453678,9.37170239 14.1955653,9.53094054 14.403777,9.8248672 C14.6119887,10.1187939 14.6460373,10.5019855 14.4929125,10.8280188 C14.3397876,11.1540522 14.0231532,11.372542 13.664,11.4 C12.828,11.474 11.9923333,11.554 11.157,11.64 C11.1227925,11.6436605 11.0884012,11.6453299 11.054,11.645 Z" id="Shape" fill="#ECF0F1"/><path d="M17.684,15.847 C17.1575764,15.8482545 16.7203218,15.4411705 16.684,14.916 L16.04,5.433 C16.0021685,4.88071526 16.4192153,4.40233153 16.9715,4.36450003 C17.5237847,4.32666853 18.0021685,4.74371526 18.04,5.296 L18.688,14.779 C18.7061196,15.0437059 18.6182995,15.3047618 18.4438739,15.5046948 C18.2694482,15.7046279 18.0227172,15.8270467 17.758,15.845 L17.684,15.847 Z" id="Shape" fill="#ECF0F1"/><path d="M32.465,15.443 L32.451,15.443 C32.1857763,15.4395745 31.932779,15.3309181 31.7476758,15.1409388 C31.5625726,14.9509595 31.4605297,14.6952231 31.464,14.43 L31.594,4.93 C31.6157814,4.38387418 32.0614785,3.9504843 32.608,3.944 C32.8732248,3.94768715 33.126119,4.05659681 33.3110354,4.24676441 C33.4959518,4.43693201 33.5977391,4.69277591 33.594,4.958 L33.464,14.458 C33.4558089,15.004029 33.0110902,15.4425153 32.465,15.443 Z" id="Shape" fill="#ECF0F1"/><path d="M22.608,15.578 C22.0713385,15.5784512 21.6300029,15.1552105 21.608,14.619 L21.219,5.119 C21.1997106,4.66193925 21.4930375,4.25006629 21.9312834,4.11885212 C22.3695293,3.98763796 22.8409374,4.17054341 23.076,4.563 C24.237,6.496 25.376,8.463 26.476,10.434 L26.401,4.95 C26.3972609,4.68477591 26.4990482,4.42893201 26.6839646,4.23876441 C26.868881,4.04859681 27.1217752,3.93968715 27.387,3.936 L27.401,3.936 C27.9478633,3.9359464 28.3933439,4.37519031 28.401,4.922 L28.531,14.422 C28.537905,14.883511 28.2280476,15.2897911 27.7811455,15.4051973 C27.3342434,15.5206034 26.8664144,15.3151499 26.649,14.908 C25.596,12.943 24.501,10.974 23.377,9.023 L23.602,14.529 C23.6245545,15.0806997 23.1956925,15.5462701 22.644,15.569 L22.608,15.578 Z" id="Shape" fill="#ECF0F1"/><path d="M38.851,10.886 L38.8,10.886 C37.882546,10.8473675 37.0147492,10.4587377 36.375,9.8 C35.717644,9.15744632 35.3648939,8.26544524 35.404972,7.34708481 C35.4450501,6.42872438 35.8741665,5.57084466 36.585,4.988 C37.2906773,4.38816332 38.2003872,4.0833747 39.125,4.137 C40.4210189,4.17963511 41.5913492,4.92358975 42.18,6.079 C42.3371969,6.40053903 42.3109138,6.7815169 42.1110512,7.0784229 C41.9111887,7.37532891 41.5681106,7.54305597 41.2110512,7.51842292 C40.8539918,7.49378987 40.5371968,7.28053905 40.38,6.959 C40.1074682,6.46288716 39.590915,6.14990546 39.025,6.138 C38.6084312,6.11270026 38.1978868,6.24716429 37.877,6.514 C37.5895709,6.7380642 37.414853,7.07689979 37.399,7.441 C37.3898646,7.80321092 37.5357516,8.15210282 37.8,8.4 C38.0898637,8.69906018 38.483828,8.8749115 38.9,8.891 C39.4522847,8.90397871 39.8894787,9.36221526 39.8765,9.9145 C39.8635213,10.4667847 39.4052847,10.9039787 38.853,10.891 L38.851,10.886 Z" id="Shape" fill="#ECF0F1"/><path d="M38.751,15.636 C38.693,15.636 38.634,15.636 38.576,15.636 C37.3167305,15.5832623 36.1830668,14.8575343 35.608,13.736 C35.3642304,13.2435325 35.5634881,12.646635 36.0542022,12.3993547 C36.5449164,12.1520743 37.1432216,12.3470643 37.394,12.836 C37.6477641,13.310176 38.1336185,13.6145483 38.671,13.636 C39.0608146,13.6622725 39.4450674,13.5323893 39.739,13.275 C40.0278611,13.0450836 40.2067668,12.7043281 40.232,12.336 C40.2512559,11.9901896 40.1301024,11.6512483 39.896,11.396 C39.6137597,11.0872901 39.2199359,10.9040576 38.802,10.887 C38.4447344,10.8691367 38.1241373,10.6620315 37.9609746,10.3436987 C37.7978118,10.025366 37.8168717,9.64416816 38.0109746,9.34369872 C38.2050774,9.04322929 38.5447344,8.86913672 38.902,8.887 C39.8548381,8.93151845 40.7506206,9.35403699 41.391,10.061 C41.9924542,10.7253616 42.295683,11.6070015 42.2301284,12.5007723 C42.1645739,13.394543 41.7359527,14.2225046 41.044,14.792 C40.4077439,15.3428321 39.5925405,15.6428896 38.751,15.636 Z" id="Shape" fill="#ECF0F1"/><path d="M44.775,16.032 C44.7476864,16.0334698 44.7203136,16.0334698 44.693,16.032 C44.1426954,15.9868969 43.7330871,15.5043201 43.778,14.954 L44.555,5.482 C44.578768,5.12164632 44.7949829,4.8021035 45.1206513,4.64602724 C45.4463197,4.48995099 45.8308393,4.52159234 46.1266133,4.72880585 C46.4223873,4.93601936 46.5834584,5.28660831 46.548,5.646 L45.771,15.117 C45.726869,15.6343103 45.2941892,16.0318022 44.775,16.032 Z" id="Shape" fill="#ECF0F1"/><path d="M49.687,16.5 C49.6502524,16.4999675 49.6135331,16.4979646 49.577,16.494 C49.0293426,16.4337433 48.6335988,15.9418583 48.692,15.394 L49.728,5.946 C49.792781,5.40110711 50.284551,5.01020082 50.8300114,5.07001489 C51.3754719,5.12982897 51.7708422,5.61801725 51.716,6.164 L50.68,15.612 C50.6230284,16.1174756 50.1956759,16.4996397 49.687,16.5 Z" id="Shape" fill="#ECF0F1"/><path d="M50.206,11.779 C50.1689191,11.7789956 50.1318653,11.7769927 50.095,11.773 C48.427,11.59 46.74,11.428 45.082,11.292 C44.5396942,11.237482 44.1409252,10.7587266 44.1853536,10.2155011 C44.229782,9.67227555 44.7010425,9.26467657 45.245,9.299 C46.921,9.437 48.627,9.599 50.313,9.785 C50.8403719,9.84301864 51.2306376,10.3027951 51.2022085,10.8325867 C51.1737793,11.3623782 50.7365523,11.7777506 50.206,11.779 Z" id="Shape" fill="#ECF0F1"/><path d="M58,58 L2,58 C1.59016658,57.9985898 1.22268039,57.7472533 1.07275473,57.3658247 C0.92282907,56.9843962 1.02081741,56.5500985 1.32,56.27 L7.55,51 L12.27,47 L16.44,43.47 C16.8021925,43.1679693 17.2584038,43.0017527 17.73,43 L42.27,43 C42.7415962,43.0017527 43.1978075,43.1679693 43.56,43.47 L47.73,47 L52.45,51 L58.68,56.27 C58.9791826,56.5500985 59.0771709,56.9843962 58.9272453,57.3658247 C58.7773196,57.7472533 58.4098334,57.9985898 58,58 Z" id="Shape" fill="#5E5F62"/><path d="M22.32,43 L19.66,47 L12.27,47 L16.44,43.47 C16.8021925,43.1679693 17.2584038,43.0017527 17.73,43 L22.32,43 Z" id="Shape" fill="#2C2F38"/><path d="M47.73,47 L40.34,47 L37.68,43 L42.27,43 C42.7415962,43.0017527 43.1978075,43.1679693 43.56,43.47 L47.73,47 Z" id="Shape" fill="#2C2F38"/><polygon id="Shape" fill="#E6E7E8" points="52.45 51 43 51 40.34 47 47.73 47"/><polygon id="Shape" fill="#E6E7E8" points="19.66 47 17 51 7.55 51 12.27 47"/><polygon id="Shape" fill="#E6E7E8" points="27.64 43 26.82 47 19.66 47 22.32 43"/><polygon id="Shape" fill="#E6E7E8" points="40.34 47 33.18 47 32.36 43 37.68 43"/><polygon id="Shape" fill="#2C2F38" points="26.82 47 26 51 17 51 19.66 47"/><polygon id="Shape" fill="#2C2F38" points="33.18 47 26.82 47 27.64 43 32.36 43"/><polygon id="Shape" fill="#E6E7E8" points="34 51 26 51 26.82 47 33.18 47"/><polygon id="Shape" fill="#2C2F38" points="43 51 34 51 33.18 47 40.34 47"/></g></g></svg>\n                </div>\n            `}}t.default=r},812:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(954);const a=i(n(503));class r extends a.default{constructor(){super("header",["header"]),this.element.innerHTML='\n            <nav>\n                <ul>\n                    <li>\n                        <a href="#/garage">Garage</a>\n                    </li>\n                    <li>\n                    <a href="#/winners">Winners</a>\n                    </li>\n                </ul>\n            </nav>'}}t.default=r},507:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(923);const a=i(n(503)),r=i(n(506));class s extends a.default{constructor(){super("main",["app"]),this.router=new r.default,this.element.appendChild(this.router.element)}}t.default=s},709:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(589);const r=n(470),s=a(n(687)),o=a(n(503)),l=a(n(527)),d=a(n(472)),c=a(n(354)),u=n(356),h=a(n(768));class f extends o.default{constructor(){super("div",["garage"]),this.page=1,this.updatestateGarage=e=>i(this,void 0,void 0,(function*(){const{items:t,count:n}=yield r.garageService.getCars(e);s.default.setCars(t),s.default.setCarsCount(n),s.default.setCarsPage(e)})),this.pagination=new h.default(this.prev,this.next,this),this.createCarForm=new l.default(["create-car-form"],"CREATE CAR"),this.updateCarForm=new l.default(["create-car-form"],"UPDATE CAR"),this.raceBtn=new c.default(["select-car-btn"],"RACE"),this.resetBtn=new c.default(["select-car-btn"],"RESET"),this.GenerateBtn=new c.default(["select-car-btn"],"GENERATE CARS"),this.pageContainer=document.createElement("div"),this.containerCarBtn=document.createElement("div"),this.countCarContainer=document.createElement("div"),this.carsContainer=document.createElement("div"),this.element.appendChild(this.updateCarForm.element),this.element.appendChild(this.createCarForm.element),this.containerCarBtn.appendChild(this.raceBtn.element),this.containerCarBtn.appendChild(this.resetBtn.element),this.containerCarBtn.appendChild(this.GenerateBtn.element),this.element.appendChild(this.containerCarBtn),this.init(),this.element.appendChild(this.pagination.element),this.element.appendChild(this.pageContainer),this.element.appendChild(this.countCarContainer),this.element.appendChild(this.carsContainer),this.createCarForm.onSubmit((e=>i(this,void 0,void 0,(function*(){yield r.garageService.createCar(e),yield this.updatestateGarage(this.page),this.renderCars()})))),this.updateCarForm.onSubmit((e=>i(this,void 0,void 0,(function*(){const t=s.default.getSelectedCar().id;yield r.garageService.updateCar(t,e),yield this.updatestateGarage(this.page),this.renderCars()})))),s.default.subscribe((()=>{const e=s.default.getSelectedCar();e&&this.updateCarForm.setFormData(e),this.cars=s.default.getCars(),this.page!==s.default.getCarsPage()&&(this.page=s.default.getCarsPage()),this.carsCount!==+s.default.getCarsCount()&&(this.carsCount=+s.default.getCarsCount())})),this.raceBtn.element.addEventListener("click",(()=>{this.startRace()})),this.GenerateBtn.element.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){const e=yield u.generateRandomCars(),t=yield r.garageService.getCars();yield s.default.setCars([]),yield t.items.forEach((e=>{r.garageService.deleteCar(e.id)})),yield s.default.setCars(e),yield e.forEach((e=>{r.garageService.createCar(e)})),yield this.updatestateGarage(this.page),yield this.renderCars()}))))}init(){return i(this,void 0,void 0,(function*(){yield this.updatestateGarage(this.page),yield this.renderCars()}))}createCarsList(){const e=document.createElement("ul");return this.cars.forEach((t=>{const n=document.createElement("li");n.appendChild(new d.default(t).element),e.appendChild(n)})),e}renderCars(){const e=this.createCarsList();this.carsContainer.innerHTML="",this.carsContainer.appendChild(e),this.updatePagination()}updatePagination(){this.pageContainer.innerHTML=`Page #${this.page}`,this.countCarContainer.innerHTML=`Garage (${this.carsCount})`,7*this.page<this.carsCount?document.getElementById("next").removeAttribute("disabled"):document.getElementById("next").setAttribute("disabled","1"),this.page>1?document.getElementById("prev").removeAttribute("disabled"):document.getElementById("prev").setAttribute("disabled","1")}startRace(){return i(this,void 0,void 0,(function*(){window.console.log(this);return yield u.race(new d.default({name:"empty",color:"#fff",id:-2}).startDriving)}))}prev(){return i(this,void 0,void 0,(function*(){const e=s.default.getCarsPage()-1||1;yield this.updatestateGarage(e),this.renderCars()}))}next(){return i(this,void 0,void 0,(function*(){const e=s.default.getCarsPage()+1;yield this.updatestateGarage(e),this.renderCars()}))}}t.default=f},475:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=i(n(503));class r extends a.default{constructor(){super("div",["winners"]),this.element.innerHTML="<h1>WINNERS</h1>"}}t.default=r},768:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=a(n(503)),s=a(n(354));class o extends r.default{constructor(e,t,n){super("div",["pagination"]),this.prev=new s.default(["button","primary","prev-button"],"Prev"),this.prev.element.setAttribute("disabled","1"),this.prev.element.setAttribute("id","prev"),this.next=new s.default(["button","primary","next-button"],"Next"),this.next.element.setAttribute("id","next"),this.element.appendChild(this.prev.element),this.element.appendChild(this.next.element),this.prev.element.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield e.call(n)})))),this.next.element.addEventListener("click",(()=>i(this,void 0,void 0,(function*(){yield t.call(n)}))))}}t.default=o},506:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(0),r=i(n(503)),s=i(n(709)),o=i(n(475));class l extends r.default{constructor(){super("div",["router-container"]),this.onChangeRoute=()=>{const e=this.routes.find((e=>e.path===window.location.hash.split("/")[1]));e?this.renderComponent(e.getComponent()):this.renderComponent(this.routes[0].getComponent())},this.routes=this.getRoutes(),window.onpopstate=this.onChangeRoute,this.onChangeRoute()}getRoutes(){return window.console.log(this),[{path:a.RoutesName.GARAGE,getComponent:()=>(new s.default).element},{path:a.RoutesName.WINNERS,getComponent:()=>(new o.default).element}]}renderComponent(e){this.element.innerHTML="",this.element.appendChild(e)}}t.default=l},649:function(e,t,n){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(476);const a=i(n(271));window.onload=()=>{const e=document.body;if(!e)throw new Error("App root element not found");const t=new a.default(e);window.console.log({app:t})}},0:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RoutesName=void 0,function(e){e.GARAGE="garage",e.WINNERS="winners"}(t.RoutesName||(t.RoutesName={}))},48:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.carService=t.CarService=void 0;const a=n(818);class r{constructor(e){this.restService=e}startEngine(e){return i(this,void 0,void 0,(function*(){const t=yield this.restService.get("/engine",{id:e,status:"started"});return yield t.json()}))}stopEngine(e){return i(this,void 0,void 0,(function*(){const t=yield this.restService.get("/engine",{id:e,status:"stopped"});return yield t.json()}))}drive(e){return i(this,void 0,void 0,(function*(){try{const t=yield this.restService.get("/engine",{id:e,status:"drive"});return yield t.json()}catch(e){return{success:!1,id:0,time:0}}}))}}t.CarService=r,t.carService=new r(a.restService)},470:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.garageService=t.GarageService=void 0;const r=n(818),s=a(n(687));class o{constructor(e){this.restService=e}getCars(e=1){return i(this,void 0,void 0,(function*(){const t={_page:e,_limit:7},n=yield this.restService.get("/garage",t),i=yield n.headers.get("X-Total-Count"),a=yield n.json();return s.default.setCars(a),s.default.setCarsCount(i),{items:a,count:i}}))}createCar(e){return i(this,void 0,void 0,(function*(){const t=yield this.restService.post("/garage",e);return yield t.json()}))}deleteCar(e){return i(this,void 0,void 0,(function*(){yield this.restService.delete(`/garage/${e}`)}))}updateCar(e,t){return i(this,void 0,void 0,(function*(){const n=yield this.restService.put(`/garage/${e}`,t);return yield n.json()}))}}t.GarageService=o,t.garageService=new o(r.restService)},45:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.raceService=t.RaceService=void 0;const a=n(818);class r{constructor(e){this.restService=e}startEngine(e){return i(this,void 0,void 0,(function*(){const t=yield this.restService.get("/engine",{id:e,status:"started"});return yield t.json()}))}stopEngine(e){return i(this,void 0,void 0,(function*(){const t=yield this.restService.get("/engine",{id:e,status:"stopped"});return yield t.json()}))}}t.RaceService=r,t.raceService=new r(a.restService)},818:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.restService=t.RestService=void 0;class i{constructor(){this.baseUrl="http://127.0.0.1:3000"}get(e,t){return n(this,void 0,void 0,(function*(){const n=this.createUrl(e,t);return fetch(n)}))}post(e,t){return n(this,void 0,void 0,(function*(){const n=this.createUrl(e);return fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}))}put(e,t){return n(this,void 0,void 0,(function*(){const n=this.createUrl(e);return fetch(n,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}))}delete(e){return n(this,void 0,void 0,(function*(){const t=this.createUrl(e);return fetch(t,{method:"DELETE"})}))}createUrl(e,t){let n=`${this.baseUrl}${e}`;return t&&(n+=Object.keys(t).reduce(((e,n,i)=>`${e}${0===i?"":"&"}${n}=${t[n]}`),"?")),n}}t.RestService=i,t.restService=new i},687:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default=new class{constructor(){this.subscribers=[],this.state={animation:{},cars:[],carsCount:"0",carsPage:1,garage:{selectedCar:{name:"",color:"",id:-1}}}}subscribe(e){this.subscribers.push(e)}callSubscribers(){this.subscribers.forEach((e=>e(this.state)))}getSelectedCar(){return this.state.garage.selectedCar}setSelectedCar(e){this.state.garage.selectedCar=e,this.callSubscribers()}getCars(){return this.state.cars}setCars(e){this.state.cars=e,this.callSubscribers()}getAnimation(e){return this.state.animation[e]}setAnimation(e,t){this.state.animation[e]=t,this.callSubscribers()}getCarsCount(){return this.state.carsCount}setCarsCount(e){this.state.carsCount=e,this.callSubscribers()}getCarsPage(){return this.state.carsPage}setCarsPage(e){this.state.carsPage=e,this.callSubscribers()}}},356:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function o(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((i=i.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomCars=t.race=t.raceAll=t.animation=t.getDistanceBetweenElements=void 0;const r=a(n(687));function s(e){const{top:t,left:n,width:i,height:a}=e.getBoundingClientRect();return{x:n+i/2,y:t+a/2}}t.getDistanceBetweenElements=function(e,t){const n=s(e),i=s(t);return Math.hypot(n.x-i.x,n.y-i.y)},t.animation=function(e,t,n){let i=null;const a={id:-1};return a.id=window.requestAnimationFrame((function r(s){i||(i=s);const o=s-i,l=Math.round(o*(t/n));e.style.transform=`translateX(${Math.min(l,t)}px)`,l<t&&(a.id=window.requestAnimationFrame(r))})),a};t.raceAll=(e,n)=>i(void 0,void 0,void 0,(function*(){const{success:i,id:a,time:s}=yield Promise.race(e);if(!i){const i=n.findIndex((e=>e===a)),r=[...e.slice(0,i),...e.slice(i+1,e.length)],s=[...n.slice(0,i),...n.slice(i+1,e.length)];return t.raceAll(r,s)}return Object.assign(Object.assign({},r.default.getCars().find((e=>e.id===a))),{time:+(s/1e3).toFixed(2)})}));t.race=e=>i(void 0,void 0,void 0,(function*(){const n=r.default.getCars().map((({id:t})=>e(t)));return yield t.raceAll(n,r.default.getCars().map((e=>e.id)))}));const o=["Ford","Skoda","BMW","Toyota","Subaru","Nissan","Opel","Audi","MINI","Mazda"],l=["Fiesta","Rapid","X7","RAV4","Legacy","Almera","Astra","V8","Cooper","3"];t.generateRandomCars=(e=100)=>new Array(e).fill(1).map((()=>({id:Math.random(),name:`${o[Math.floor(Math.random()*o.length)]} ${l[Math.floor(Math.random()*o.length)]}`,color:`#${Math.floor(16777215*Math.random()).toString(16)}`})))}},t={};function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};n(649)})();